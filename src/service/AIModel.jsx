// const {
//   GoogleGenerativeAI,
//   HarmCategory,
//   HarmBlockThreshold,
// } = require("@google/generative-ai");
// const fs = require("node:fs");
// const mime = require("mime-types");

// const apiKey = import.meta.env.GEMINI_API_KEY;
// const genAI = new GoogleGenerativeAI(apiKey);

// const model = genAI.getGenerativeModel({
//   model: "gemini-2.0-flash",
// });

// const generationConfig = {
//   temperature: 1,
//   topP: 0.95,
//   topK: 40,
//   maxOutputTokens: 8192,
//   responseModalities: [],
//   responseMimeType: "application/json",
// };

// export const chatSession = model.startChat({
//   generationConfig,
//   history: [
//     {
//       role: "user",
//       parts: [
//         {
//           text: "Generate Travel Plan for Location: Las vegas, for 3 Days for Couple for couple with a cheap budget, give me a cheap hotels options list with hotelName, Hotel address, Price hotel image url,geo coordinates, rating, descriptions and suggest itinerary with placename, Place details,Place Image url,Geo Coordinates, ticket pricing,rating,time travel each of the location for 3 days with each day plan with best to visit in JSON format.",
//         },
//       ],
//     },
//     {
//       role: "model",
//       parts: [
//         {
//           text: 'Okay, here\'s a JSON-based travel plan for a couple on a budget in Las Vegas for 3 days. I\'ve included hotel options, a sample itinerary, and other details.  Remember that prices in Las Vegas fluctuate wildly based on the day of the week, conventions, and events. This is just an estimate.\n```json\n{\n  "tripTitle": "Las Vegas Budget Getaway for Couples - 3 Days",\n  "budget": "Cheap/Budget-Friendly",\n  "travelers": "Couple",\n  "location": "Las Vegas, Nevada, USA",\n  "startDate": "2024-03-15",\n  "endDate": "2024-03-17",\n\n  "hotelOptions": [\n    {\n      "hotelName": "Circus Circus Hotel & Casino",\n      "hotelAddress": "2880 S Las Vegas Blvd, Las Vegas, NV 89109",\n      "hotelDescription": "A classic Vegas hotel known for its affordability and the Adventuredome indoor theme park. Good for families and budget travelers.",\n      "priceEstimate": 45,\n      "hotelImageUrl": "https://www.circuscircus.com/wp-content/uploads/2023/04/circus-circus-hotel-main-image.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1263,\n        "longitude": -115.1677\n      },\n      "rating": 3.5,\n      "amenities": ["Casino", "Adventuredome Theme Park", "Pool", "Restaurants"]\n\n    },\n    {\n      "hotelName": "Strat Hotel, Casino & Skypod",\n      "hotelAddress": "2000 S Las Vegas Blvd, Las Vegas, NV 89104",\n      "hotelDescription": "Offers thrilling rides and attractions at the top of the Stratosphere Tower, with affordable rooms. Further north on the strip.",\n      "priceEstimate": 55,\n      "hotelImageUrl": "https://www.thestrat.com/images/made/images/content/general/THE-STRAT-Hotel-Casino-Skypod-Exterior-2-3_1920_1080_s_c1_t1_b0_l0_r0.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1465,\n        "longitude": -115.1556\n      },\n      "rating": 3.8,\n      "amenities": ["Casino", "Skypod", "Rides", "Pool", "Restaurants"]\n    },\n     {\n      "hotelName": "Golden Nugget Las Vegas",\n      "hotelAddress": "129 Fremont St, Las Vegas, NV 89101",\n      "hotelDescription": "Located on Fremont Street, this hotel provides a vintage Vegas experience with a shark tank pool and more budget-friendly options.",\n      "priceEstimate": 65,\n      "hotelImageUrl": "https://www.goldennugget.com/las-vegas/wp-content/uploads/sites/7/2023/09/GNLV-Hotel-Hero-1920x1080.jpg",\n      "geoCoordinates": {\n        "latitude": 36.1702,\n        "longitude": -115.1448\n      },\n      "rating": 4.0,\n      "amenities": ["Casino", "Shark Tank Pool", "Restaurants", "Fremont Street Experience"]\n    }\n\n  ],\n\n  "itinerary": {\n    "day1": {\n      "theme": "Exploring the Strip - Free & Budget-Friendly",\n      "activities": [\n        {\n          "placeName": "Welcome to Las Vegas Sign",\n          "placeDetails": "Iconic photo opportunity. Get there early to avoid crowds.",\n          "placeImageUrl": "https://www.lasvegas.com/wp-content/uploads/2023/09/Las-Vegas-Sign.jpg",\n          "geoCoordinates": {\n            "latitude": 36.0828,\n            "longitude": -115.1732\n          },\n          "ticketPricing": "Free",\n          "rating": 4.5,\n          "timeToSpend": "30-45 minutes",\n          "travelTimeFromHotel": "15-20 minutes (depending on hotel and transportation)"\n        },\n        {\n          "placeName": "Bellagio Conservatory & Botanical Garden",\n          "placeDetails": "Stunning floral displays that change seasonally. Inside the Bellagio hotel.",\n          "placeImageUrl": "https://www.bellagio.com/content/dam/MGM/bellagio/entertainment/conservatory/bellagio-conservatory-chinese-new-year-2024-desktop.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1127,\n            "longitude": -115.1743\n          },\n          "ticketPricing": "Free",\n          "rating": 4.8,\n          "timeToSpend": "1-1.5 hours",\n          "travelTimeFromPrevious": "10 minutes (walking)"\n        },\n        {\n          "placeName": "Bellagio Fountains",\n          "placeDetails": "Spectacular water show set to music. Runs every 30 minutes in the afternoon and every 15 minutes in the evening.",\n          "placeImageUrl": "https://www.bellagio.com/content/dam/MGM/bellagio/entertainment/fountains-of-bellagio/fountains-of-bellagio-daytime-desktop.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1127,\n            "longitude": -115.1743\n          },\n          "ticketPricing": "Free",\n          "rating": 4.9,\n          "timeToSpend": "30 minutes",\n          "travelTimeFromPrevious": "Right outside the Conservatory"\n        },\n        {\n          "placeName": "Walk the Strip & Window Shopping",\n          "placeDetails": "Enjoy the atmosphere, people-watching, and free attractions like the volcano at the Mirage (check showtimes).",\n          "placeImageUrl": "https://www.casino.org/news/wp-content/uploads/2022/11/las-vegas-strip-at-night-with-casinos.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1146,\n            "longitude": -115.1728\n          },\n          "ticketPricing": "Free",\n          "rating": 4.2,\n          "timeToSpend": "2-3 hours",\n          "travelTimeFromPrevious": "Continuous along the Strip"\n        },\n          {\n          "placeName": "Happy Hour at a Budget-Friendly Bar",\n          "placeDetails": "Find happy hour deals for discounted drinks and appetizers. Many casinos and bars offer them.",\n          "placeImageUrl": "https://images.unsplash.com/photo-1551024709-602f612cfc6e?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxzZWFyY2h8Mnx8aGFwcHklMjBob3VyfGVufDB8fDB8fA%3D%3D&w=1000&q=80",\n          "geoCoordinates": {\n            "latitude": 36.1146,\n            "longitude": -115.1728\n          },\n          "ticketPricing": "Varies",\n          "rating": 4.0,\n          "timeToSpend": "1-2 hours",\n          "travelTimeFromPrevious": "Depends on location"\n        }\n      ]\n    },\n    "day2": {\n      "theme": "Downtown Las Vegas & Cheap Eats",\n      "activities": [\n        {\n          "placeName": "Fremont Street Experience",\n          "placeDetails": "Light and sound show on a giant canopy. Street performers, zip lines, and cheaper casinos.",\n          "placeImageUrl": "https://vegasexperience.com/wp-content/uploads/2017/02/fremont-street-experience-header.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1700,\n            "longitude": -115.1420\n          },\n          "ticketPricing": "Free (some attractions cost extra)",\n          "rating": 4.6,\n          "timeToSpend": "2-3 hours",\n          "travelTimeFromHotel": "20-30 minutes (depending on hotel and transportation)"\n        },\n        {\n          "placeName": "Container Park",\n          "placeDetails": "Unique shopping and entertainment complex made from shipping containers. Fun for all ages.",\n          "placeImageUrl": "https://downtowncontainerpark.com/wp-content/uploads/2022/01/DCP_Homepage-Hero.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1678,\n            "longitude": -115.1406\n          },\n          "ticketPricing": "Free (some attractions/stores cost extra)",\n          "rating": 4.3,\n          "timeToSpend": "1-2 hours",\n          "travelTimeFromPrevious": "5-10 minutes (walking)"\n        },\n        {\n          "placeName": "Heart Attack Grill",\n          "placeDetails": "Controversial burger joint with over-the-top food. Be prepared for a unique experience (and high calories!).",\n          "placeImageUrl": "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c9/Heart_Attack_Grill_%28Las_Vegas%29.jpg/800px-Heart_Attack_Grill_%28Las_Vegas%29.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1702,\n            "longitude": -115.1428\n          },\n          "ticketPricing": "$10-20 per person",\n          "rating": 3.5,\n          "timeToSpend": "1-1.5 hours",\n          "travelTimeFromPrevious": "Close to Fremont Street"\n        },\n          {\n          "placeName": "Mob Museum",\n          "placeDetails": "An interesting museum that provides a look into the history of organized crime.",\n          "placeImageUrl": "https://themobmuseum.org/wp-content/uploads/2021/09/Exterior-day-1920x1080.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1687,\n            "longitude": -115.1448\n          },\n          "ticketPricing": "$30",\n          "rating": 4.6,\n          "timeToSpend": "2-3 hours",\n          "travelTimeFromPrevious": "5-10 minutes (walking)"\n        }\n      ]\n    },\n    "day3": {\n      "theme": "Relaxation & Departure",\n      "activities": [\n        {\n          "placeName": "Pool Time",\n          "placeDetails": "Enjoy the pool at your hotel. Many Vegas hotels have great pool areas.",\n          "placeImageUrl": "https://www.reviewjournal.com/wp-content/uploads/2023/07/22676599_web1_RIV-072023-Pools-JLC_004.jpg?w=1200",\n          "geoCoordinates": {\n            "latitude": 36.1263,\n            "longitude": -115.1677\n          },\n          "ticketPricing": "Free (usually included with hotel)",\n          "rating": 4.0,\n          "timeToSpend": "2-3 hours",\n          "travelTimeFromHotel": "N/A"\n        },\n        {\n          "placeName": "Explore a Different Hotel/Casino (Free)",\n          "placeDetails": "Check out a different hotel like the Venetian or Paris for free sights and attractions.",\n          "placeImageUrl": "https://media.cntraveler.com/photos/5b8a5e91f884021d99f89068/master/pass/Venetian-Las-Vegas_Venetian-Las-Vegas_GettyImages-544802437.jpg",\n          "geoCoordinates": {\n            "latitude": 36.1212,\n            "longitude": -115.1709\n          },\n          "ticketPricing": "Free",\n          "rating": 4.3,\n          "timeToSpend": "2-3 hours",\n          "travelTimeFromHotel": "Depends on location"\n        },\n          {\n          "placeName": "Cheap Eats before Departure",\n          "placeDetails": "Grab a final affordable meal at a fast-food restaurant or buffet.",\n          "placeImageUrl": "https://www.foodtruckempire.com/wp-content/uploads/2023/11/cheap-eats-cover.jpeg",\n          "geoCoordinates": {\n            "latitude": 36.1212,\n            "longitude": -115.1709\n          },\n          "ticketPricing": "Varies",\n          "rating": 3.8,\n          "timeToSpend": "1-2 hours",\n          "travelTimeFromHotel": "Depends on location"\n        }\n      ]\n    }\n  },\n\n  "transportationTips": [\n    "Utilize the Las Vegas Monorail (if near its route) for efficient travel along the Strip.",\n    "Walk as much as possible on the Strip to save money and see the sights.",\n    "Consider ride-sharing services (Uber/Lyft) for longer distances, but compare prices as they can fluctuate.",\n    "The Deuce is a double-decker bus that runs up and down the Strip and to Downtown."\n  ],\n\n  "budgetSavingTips": [\n    "Travel during the off-season (summer heat or mid-week) for lower hotel rates.",\n    "Look for free activities like the Bellagio fountains, conservatory, and walking the Strip.",\n    "Take advantage of happy hour deals for cheaper drinks and food.",\n    "Eat at affordable restaurants or fast-food options.",\n    "Avoid gambling too much!",\n    "Bring your own water bottles to avoid buying expensive drinks on the Strip."\n  ],\n    "Disclaimer": "Prices and times are estimates and may vary. It is recommended to check the current information on the official websites."\n}\n```\n\n**Important Notes:**\n\n*   **Pricing Fluctuation:**  Las Vegas hotel and attraction prices are highly variable. The prices I\'ve given are *estimates*. Check current rates on hotel websites and ticket vendors.\n*   **Transportation:** Consider purchasing a multi-day bus pass for "The Deuce" for affordable transportation up and down the strip and to Fremont Street. Walking is great, but can be tiring, especially in the heat.\n*   **Reservations:**  For popular restaurants or shows, even budget-friendly ones, making reservations in advance is recommended.\n*   **Flexibility:**  This is a suggested itinerary.  Feel free to adjust it based on your interests and energy levels.  Don\'t feel pressured to do everything.\n*   **Check Official Websites:** Verify show times, attraction opening hours, and pricing on the official websites of each location *before* you go.\n*   **Enjoy!** Las Vegas can be a blast, even on a budget. Be smart, plan ahead, and have fun!\n',
//         },
//       ],
//     },
//   ],
// });

// // const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
// // // TODO: Following code needs to be updated for client-side apps.
// // const candidates = result.response.candidates;
// for (
//   let candidate_index = 0;
//   candidate_index < candidates.length;
//   candidate_index++
// ) {
//   for (
//     let part_index = 0;
//     part_index < candidates[candidate_index].content.parts.length;
//     part_index++
//   ) {
//     const part = candidates[candidate_index].content.parts[part_index];
//     if (part.inlineData) {
//       try {
//         const filename = `output_${candidate_index}_${part_index}.${mime.extension(
//           part.inlineData.mimeType
//         )}`;
//         fs.writeFileSync(filename, Buffer.from(part.inlineData.data, "base64"));
//         console.log(`Output written to: ${filename}`);
//       } catch (err) {
//         console.error(err);
//       }
//     }
//   }
// }

import { GoogleGenerativeAI } from "@google/generative-ai";

const apiKey = import.meta.env.GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: "Generate Travel Plan for Location : Las Vegas, for 3 Days for Couple with a Cheap budget ,Give me a Hotels options list with Hotel Name, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with place Name, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format",
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "hotel_options": [\n    {\n      "name": "The D Las Vegas",\n      "address": "301 Fremont Street, Las Vegas, NV 89101",\n      "price": "from $35/night",\n      "image_url": "https://www.thedorleans.com/media/images/hero-images/hero-home-new.jpg",\n      "geo_coordinates": "36.1696,-115.1420",\n      "rating": "4.0 stars",\n      "description": "Located in the heart of Downtown Las Vegas, The D is a budget-friendly option with a retro vibe. It offers a casino, multiple dining options, and a rooftop pool."\n    },\n    {\n      "name": "Circus Circus Hotel & Casino",\n      "address": "2880 Las Vegas Blvd S, Las Vegas, NV 89109",\n      "price": "from $40/night",\n      "image_url": "https://media.cntraveler.com/photos/5e3c1834794e280008b6420d/master/pass/circus-circus-hotel-and-casino-las-vegas-01.jpg",\n      "geo_coordinates": "36.1183,-115.1694",\n      "rating": "3.5 stars",\n      "description": "Known for its circus-themed attractions, Circus Circus offers a family-friendly atmosphere with affordable accommodations, a large casino, and a midway with carnival games."\n    },\n    {\n      "name": "Golden Nugget Hotel & Casino",\n      "address": "129 E Fremont St, Las Vegas, NV 89101",\n      "price": "from $50/night",\n      "image_url": "https://www.goldennugget.com/las-vegas/images/hero-image-las-vegas-hotel.jpg",\n      "geo_coordinates": "36.1684,-115.1419",\n      "rating": "4.5 stars",\n      "description": "A historic and glamorous hotel located on Fremont Street, Golden Nugget boasts a world-class casino, multiple restaurants, a large pool complex, and a shark tank."\n    }\n  ],\n  "itinerary": [\n    {\n      "day": "Day 1",\n      "plan": [\n        {\n          "time": "Morning (9:00 AM - 12:00 PM)",\n          "place": "Fremont Street Experience",\n          "details": "Explore the vibrant Fremont Street Experience, a pedestrian mall with live music, street performers, and the famous Viva Vision light show.",\n          "image_url": "https://www.visitlasvegas.com/media/2015/11/Fremont-Street-Experience.jpg",\n          "geo_coordinates": "36.1696,-115.1420",\n          "ticket_pricing": "Free",\n          "rating": "4.5 stars"\n        },\n        {\n          "time": "Afternoon (12:00 PM - 3:00 PM)",\n          "place": "Pinball Hall of Fame",\n          "details": "Play classic pinball machines from all eras at the Pinball Hall of Fame, a fun and nostalgic experience.",\n          "image_url": "https://www.pinballhalloffame.org/img/slideshow/slider_img_02.jpg",\n          "geo_coordinates": "36.1708,-115.1434",\n          "ticket_pricing": "$15 per person",\n          "rating": "4.0 stars"\n        },\n        {\n          "time": "Evening (7:00 PM - 10:00 PM)",\n          "place": "The Neon Museum",\n          "details": "Take a guided tour of the Neon Museum, a collection of iconic Las Vegas signs from the past.",\n          "image_url": "https://www.neonmuseum.org/wp-content/uploads/2018/12/NEON-MUSEUM-LAS-VEGAS-SIGN-TOUR-IMAGE.jpg",\n          "geo_coordinates": "36.1745,-115.1443",\n          "ticket_pricing": "$25 per person",\n          "rating": "4.5 stars"\n        }\n      ]\n    },\n    {\n      "day": "Day 2",\n      "plan": [\n        {\n          "time": "Morning (10:00 AM - 1:00 PM)",\n          "place": "Hoover Dam",\n          "details": "Take a day trip to Hoover Dam, an engineering marvel and a popular tourist destination.",\n          "image_url": "https://www.nps.gov/articles/000/images/hoover-dam_06.jpg",\n          "geo_coordinates": "36.0288,-114.9667",\n          "ticket_pricing": "Free admission",\n          "rating": "4.5 stars"\n        },\n        {\n          "time": "Afternoon (2:00 PM - 5:00 PM)",\n          "place": "Red Rock Canyon National Conservation Area",\n          "details": "Hike or drive through the stunning Red Rock Canyon, offering beautiful rock formations and scenic views.",\n          "image_url": "https://www.nps.gov/articles/000/images/red-rock-canyon-01.jpg",\n          "geo_coordinates": "36.1000,-115.2500",\n          "ticket_pricing": "$15 per vehicle",\n          "rating": "4.5 stars"\n        },\n        {\n          "time": "Evening (7:00 PM - 10:00 PM)",\n          "place": "Free Show on the Strip",\n          "details": "Catch a free show on the Las Vegas Strip, such as the Bellagio Fountains or the volcano at the Mirage.",\n          "image_url": "https://www.bellagio.com/content/dam/mgmresorts/bellagio/images/bellagio-fountains-hero-mobile.jpg",\n          "geo_coordinates": "36.1140,-115.1720",\n          "ticket_pricing": "Free",\n          "rating": "4.5 stars"\n        }\n      ]\n    },\n    {\n      "day": "Day 3",\n      "plan": [\n        {\n          "time": "Morning (10:00 AM - 12:00 PM)",\n          "place": "The LINQ Promenade",\n          "details": "Stroll along the LINQ Promenade, a shopping and dining area with a High Roller observation wheel.",\n          "image_url": "https://www.caesars.com/content/dam/caesars/linq/images/hero-image-linq-promenade-mobile.jpg",\n          "geo_coordinates": "36.1166,-115.1709",\n          "ticket_pricing": "From $25 for the High Roller",\n          "rating": "4.0 stars"\n        },\n        {\n          "time": "Afternoon (12:00 PM - 3:00 PM)",\n          "place": "The Mob Museum",\n          "details": "Learn about the history of organized crime in Las Vegas at the Mob Museum, a fascinating and interactive experience.",\n          "image_url": "https://www.themobmuseum.org/media/images/hero/mob-museum-exterior-1200x560-2022-08-03_11-49-03.jpg",\n          "geo_coordinates": "36.1690,-115.1438",\n          "ticket_pricing": "$25 per person",\n          "rating": "4.5 stars"\n        },\n        {\n          "time": "Evening (7:00 PM - 10:00 PM)",\n          "place": "Buffet Dinner",\n          "details": "Enjoy a budget-friendly buffet dinner at one of the many casinos on the Strip.",\n          "image_url": "https://www.caesars.com/content/dam/caesars/paris/images/restaurants/buffet-paris.jpg",\n          "geo_coordinates": "36.1140,-115.1720",\n          "ticket_pricing": "Varies by casino and buffet",\n          "rating": "4.0 stars"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Notes:**\n\n* This itinerary is just a suggestion, you can customize it based on your interests and preferences.\n* Be sure to check the opening hours and ticket prices for each attraction before visiting.\n* You can find affordable dining options in Downtown Las Vegas and off the Strip.\n* Consider using public transportation or ride-sharing services to save money on transportation costs.\n\n**For more details about each attraction and to find updated prices, please visit their official websites.**\n',
        },
      ],
    },
  ],
});
